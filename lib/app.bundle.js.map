{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/hm-10.js","webpack:///./src/index.js"],"names":["hm10","onDisconnect","decoder","TextDecoder","encoder","TextEncoder","rxTxServiceId","characteristicId","service","characteristic","requestDevice","navigator","bluetooth","filters","services","then","device","console","log","gatt","connect","server","getPrimaryService","getCharacteristic","startNotifications","char","addEventListener","response","currentTarget","value","byteLength","alert","decode","catch","error","JSON","stringify","STATIC_MAPS_FOLDERS","window","start","client"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","const hm10 = function ({ onDisconnect }) {\n  // validate if BLE allowed\n  const decoder = new TextDecoder(\"utf-8\");\n  const encoder = new TextEncoder(\"utf-8\");\n\n  const rxTxServiceId = '0000ffe0-0000-1000-8000-00805f9b34fb';\n  const characteristicId = '0000ffe1-0000-1000-8000-00805f9b34fb';\n\n  let service, characteristic;\n\n  return function requestDevice() {\n\n    return navigator.bluetooth.requestDevice({ filters: [{ services: [rxTxServiceId] }] })\n      .then(device => {\n        console.log('device', device);\n        return device.gatt.connect();\n      })\n      .then(server => {\n        console.log('server', server);\n        // Getting Battery Service...\n        return server.getPrimaryService(rxTxServiceId);\n      })\n      .then(service => {\n        console.log('service', service);\n        // Getting Battery Level Characteristic...\n        return service.getCharacteristic(characteristicId);\n      })\n      .then(characteristic => {\n        console.log('characteristic', characteristic);\n\n        characteristic\n          .startNotifications()\n          .then((char) => {\n            char.addEventListener('characteristicvaluechanged', (response) => {\n              console.log(response.currentTarget.value.byteLength);\n\n              alert(\n                decoder.decode(response.currentTarget.value)\n              );\n            });\n          });\n      })\n      .then(value => {\n        // console.log('Battery percentage is ' + value.getUint8(0));\n      })\n      .catch(error => { alert(error); });\n\n\n\n    // return navigator.bluetooth.requestDevice({\n    //   filters: [{\n    //     services: [rxTxServiceId]\n    //   }]\n    // })\n    // .then(device => device.gatt.connect())\n    // .then(server => server.getPrimaryService(rxTxServiceId))\n    // .then(service => service.getCharacteristic(characteristicId))\n    // .then(characteristic => {\n    //   return {\n    //     write: function (data) {\n    //       characteristic.writeValue(\n    //         encoder.encode(data)\n    //       )\n    //     },\n    //     subscribe: function (onMessage) {\n          \n          \n    //     }\n    //   }\n    //   console.log('Notifications have been started.');\n    // })\n    // .catch((err) => alert(err));\n  }\n}\n\nexport default hm10;","import hm10 from './hm-10';\n\nalert(JSON.stringify(STATIC_MAPS_FOLDERS, null, 4));\n\ndebugger;\n\nwindow.start = function () {\n  const client = new hm10({ onDisconnect: () => alert('Disconnected') });\n  \n  client();\n};\n\n"],"sourceRoot":""}